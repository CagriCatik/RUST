<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ownership</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../01_Primitive_Data_Types/index.html"><strong aria-hidden="true">1.</strong> Primitive Data Types</a></li><li class="chapter-item expanded "><a href="../02_Compound_Data_Types/index.html"><strong aria-hidden="true">2.</strong> Compound Data Types</a></li><li class="chapter-item expanded "><a href="../03_Functions/index.html"><strong aria-hidden="true">3.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../04_Ownership/index.html" class="active"><strong aria-hidden="true">4.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../05_Borrowing_and_References/index.html"><strong aria-hidden="true">5.</strong> Borrowing and References</a></li><li class="chapter-item expanded "><a href="../06_Variables_&_Mutability/index.html"><strong aria-hidden="true">6.</strong> Variables and Mutability</a></li><li class="chapter-item expanded "><a href="../07_Constants/index.html"><strong aria-hidden="true">7.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../08_Shadowing/index.html"><strong aria-hidden="true">8.</strong> Shadowing</a></li><li class="chapter-item expanded "><a href="../09_Comments/index.html"><strong aria-hidden="true">9.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../10_If_Else_Statements_Control_Flow/index.html"><strong aria-hidden="true">10.</strong> If-else Statements</a></li><li class="chapter-item expanded "><a href="../11_Loops-Control-Flow/index.html"><strong aria-hidden="true">11.</strong> Loops</a></li><li class="chapter-item expanded "><a href="../12_Structs/index.html"><strong aria-hidden="true">12.</strong> Structs</a></li><li class="chapter-item expanded "><a href="../13_Enums/index.html"><strong aria-hidden="true">13.</strong> Enums</a></li><li class="chapter-item expanded "><a href="../14_Error-Handling/index.html"><strong aria-hidden="true">14.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../15_Collection-Types/index.html"><strong aria-hidden="true">15.</strong> Collection Types</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ownership"><a class="header" href="#ownership">Ownership</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>In this lesson, we will delve into the concept of ownership in Rust. Understanding ownership is crucial for managing memory safely and efficiently, a key feature that distinguishes Rust from other programming languages. This tutorial aims to provide a comprehensive understanding of ownership, its rules, and how it addresses common memory management issues.</p>
<h2 id="why-ownership-exists"><a class="header" href="#why-ownership-exists">Why Ownership Exists</a></h2>
<p>Memory management has always been a critical aspect of programming. Languages like C and C++ give developers complete control over memory allocation and deallocation. However, this flexibility can lead to bugs such as double freeing memory or memory leaks when memory is not properly released.</p>
<p>To mitigate these issues, some languages employ garbage collection (GC), which automatically manages memory allocation and deallocation. While GC simplifies memory management, it can introduce performance overhead and pauses during program execution, as the garbage collector periodically stops the program to reclaim unused memory. This can lead to inefficient performance, especially for applications requiring high memory throughput.</p>
<p>Rust addresses these issues through its unique ownership system, ensuring memory safety without the need for a garbage collector.</p>
<h2 id="ownership-in-rust"><a class="header" href="#ownership-in-rust">Ownership in Rust</a></h2>
<p>Ownership is a set of rules that govern how Rust manages memory. The primary goal of ownership is to ensure memory safety and prevent bugs. Ownership rules are enforced at compile time, ensuring that memory errors are caught early in the development process.</p>
<h3 id="the-three-rules-of-ownership"><a class="header" href="#the-three-rules-of-ownership">The Three Rules of Ownership</a></h3>
<ol>
<li><strong>Each value in Rust has a single owner.</strong></li>
<li><strong>There can only be one owner at a time.</strong></li>
<li><strong>When the owner goes out of scope, the value will be dropped.</strong></li>
</ol>
<h3 id="rule-1-each-value-in-rust-has-a-single-owner"><a class="header" href="#rule-1-each-value-in-rust-has-a-single-owner">Rule 1: Each Value in Rust Has a Single Owner</a></h3>
<p>Each value in Rust is owned by a variable. The ownership of the value is unique to that variable. Here is an example to illustrate this rule:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Rust");
    println!("The value of s1 is: {}", s1);
}</code></pre></pre>
<p>In this example, the string <code>"Rust"</code> is owned by the variable <code>s1</code>.</p>
<h3 id="rule-2-there-can-only-be-one-owner-at-a-time"><a class="header" href="#rule-2-there-can-only-be-one-owner-at-a-time">Rule 2: There Can Only Be One Owner at a Time</a></h3>
<p>Ownership can be transferred from one variable to another. This is called a "move." When a value is moved, the original owner can no longer access the value. Here is an example:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Rust");
    let s2 = s1;
    println!("The value of s2 is: {}", s2);
    // println!("The value of s1 is: {}", s1); // This will cause an error
}</code></pre></pre>
<p>In this example, ownership of the string <code>"Rust"</code> is moved from <code>s1</code> to <code>s2</code>. Attempting to use <code>s1</code> after the move will result in a compile-time error because <code>s1</code> no longer owns the value.</p>
<h3 id="rule-3-when-the-owner-goes-out-of-scope-the-value-will-be-dropped"><a class="header" href="#rule-3-when-the-owner-goes-out-of-scope-the-value-will-be-dropped">Rule 3: When the Owner Goes Out of Scope, the Value Will Be Dropped</a></h3>
<p>When the owner of a value goes out of scope, Rust automatically deallocates the memory associated with that value. Here is an example:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    {
        let s1 = String::from("Rust");
        println!("The value of s1 is: {}", s1);
    }
    // s1 is no longer accessible here
}</code></pre></pre>
<p>In this example, <code>s1</code> goes out of scope at the end of the inner block, and the memory associated with <code>s1</code> is deallocated.</p>
<h2 id="borrowing-and-references"><a class="header" href="#borrowing-and-references">Borrowing and References</a></h2>
<p>Borrowing allows you to create references to values without taking ownership. This enables safe concurrent access to values without sacrificing memory safety.</p>
<h3 id="mutable-and-immutable-references"><a class="header" href="#mutable-and-immutable-references">Mutable and Immutable References</a></h3>
<p>You can create immutable references using the <code>&amp;</code> operator, and mutable references using the <code>&amp;mut</code> operator. Here is an example:</p>
<pre><pre class="playground"><code class="language-rust">fn calculate_length(s: &amp;String) -&gt; usize {
    s.len()
}

fn main() {
    let s1 = String::from("Rust");
    let len = calculate_length(&amp;s1);
    println!("The length of '{}' is {}", s1, len);
}</code></pre></pre>
<p>In this example, <code>calculate_length</code> takes an immutable reference to a <code>String</code>, allowing the function to read the value without taking ownership. The ownership of <code>s1</code> remains with the original owner.</p>
<h3 id="example-illustrating-the-three-rules"><a class="header" href="#example-illustrating-the-three-rules">Example Illustrating the Three Rules</a></h3>
<p>Let's summarize the three rules with an example:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Rust");
    let s2 = s1; // s1 is moved to s2
    println!("The value of s2 is: {}", s2);

    let s3 = String::from("Rust");
    let len = calculate_length(&amp;s3); // borrow s3
    println!("The length of '{}' is {}", s3, len); // s3 can still be used

    {
        let s4 = String::from("Scope");
        println!("The value of s4 is: {}", s4);
    } // s4 goes out of scope and is dropped here
}</code></pre></pre>
<p>This example demonstrates ownership transfer, borrowing, and scope-based deallocation.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Rust's ownership system is a powerful tool for ensuring memory safety and preventing common memory management bugs. By adhering to the three rules of ownership, developers can write efficient, safe, and reliable code. As the White House Office of the National Cyber Director suggests, transitioning to memory-safe languages like Rust is essential for modern software development.</p>
<p>For further details, refer to the <a href="https://doc.rust-lang.org/book/">Rust Book</a> which provides an in-depth explanation of ownership and other Rust features.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../03_Functions/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../05_Borrowing_and_References/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../03_Functions/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../05_Borrowing_and_References/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
