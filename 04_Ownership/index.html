<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ownership</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../01_Primitive_Data_Types/index.html"><strong aria-hidden="true">1.</strong> Primitive Data Types</a></li><li class="chapter-item expanded "><a href="../02_Compound_Data_Types/index.html"><strong aria-hidden="true">2.</strong> Compound Data Types</a></li><li class="chapter-item expanded "><a href="../03_Functions/index.html"><strong aria-hidden="true">3.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../04_Ownership/index.html" class="active"><strong aria-hidden="true">4.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../05_Borrowing_and_References/index.html"><strong aria-hidden="true">5.</strong> Borrowing and References</a></li><li class="chapter-item expanded "><a href="../06_Variables_&_Mutability/index.html"><strong aria-hidden="true">6.</strong> Variables and Mutability</a></li><li class="chapter-item expanded "><a href="../07_Constants/index.html"><strong aria-hidden="true">7.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../08_Shadowing/index.html"><strong aria-hidden="true">8.</strong> Shadowing</a></li><li class="chapter-item expanded "><a href="../09_Comments/index.html"><strong aria-hidden="true">9.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../10_If_Else_Statements_Control_Flow/index.html"><strong aria-hidden="true">10.</strong> If-else Statements</a></li><li class="chapter-item expanded "><a href="../11_Loops-Control-Flow/index.html"><strong aria-hidden="true">11.</strong> Loops</a></li><li class="chapter-item expanded "><a href="../12_Structs/index.html"><strong aria-hidden="true">12.</strong> Structs</a></li><li class="chapter-item expanded "><a href="../13_Enums/index.html"><strong aria-hidden="true">13.</strong> Enums</a></li><li class="chapter-item expanded "><a href="../14_Error-Handling/index.html"><strong aria-hidden="true">14.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../15_Collection-Types/index.html"><strong aria-hidden="true">15.</strong> Collection Types</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ownership"><a class="header" href="#ownership">Ownership</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>In this lesson, we will explore one of the most critical concepts in Rust: Ownership. Rust's ownership model is a unique feature that ensures memory safety without needing a garbage collector, making it stand out among other programming languages. Understanding ownership is fundamental to mastering Rust, as it governs how memory is managed in your programs, ensuring that your applications are both safe and efficient.</p>
<h2 id="1-why-ownership-matters"><a class="header" href="#1-why-ownership-matters">1. Why Ownership Matters</a></h2>
<h3 id="11-memory-management-in-traditional-languages"><a class="header" href="#11-memory-management-in-traditional-languages">1.1 Memory Management in Traditional Languages</a></h3>
<p>In traditional programming languages like C and C++, memory management is manual. Developers must explicitly allocate and deallocate memory, which can lead to issues such as:</p>
<ul>
<li><strong>Double freeing</strong>: Releasing the same memory more than once.</li>
<li><strong>Memory leaks</strong>: Forgetting to free memory, leading to wasted resources.</li>
</ul>
<h3 id="12-garbage-collection"><a class="header" href="#12-garbage-collection">1.2 Garbage Collection</a></h3>
<p>Some languages, like Java and Python, use a garbage collector to automate memory management. The garbage collector tracks and frees memory that is no longer in use. However, this can introduce performance drawbacks, such as pauses in program execution when the garbage collector runs, leading to inefficiencies, especially in performance-critical applications.</p>
<h3 id="13-rusts-solution-ownership"><a class="header" href="#13-rusts-solution-ownership">1.3 Rust’s Solution: Ownership</a></h3>
<p>Rust introduces the concept of <strong>ownership</strong> to manage memory efficiently and safely. Ownership enforces strict rules at compile time, ensuring that memory is used correctly and preventing common bugs related to memory management. Rust's ownership model is designed to eliminate the need for a garbage collector, resulting in faster and more predictable performance.</p>
<h2 id="2-the-three-rules-of-ownership"><a class="header" href="#2-the-three-rules-of-ownership">2. The Three Rules of Ownership</a></h2>
<p>Rust's ownership system is built on three fundamental rules:</p>
<ol>
<li><strong>Each value in Rust has a single owner.</strong></li>
<li><strong>There can only be one owner at a time.</strong></li>
<li><strong>When the owner goes out of scope, the value will be dropped.</strong></li>
</ol>
<h3 id="21-rule-1-each-value-has-an-owner"><a class="header" href="#21-rule-1-each-value-has-an-owner">2.1 Rule 1: Each Value Has an Owner</a></h3>
<p>Every value in Rust is owned by a variable. This means that each piece of data in your program is associated with a specific owner, which is a variable that controls the data.</p>
<h4 id="example-value-ownership"><a class="header" href="#example-value-ownership">Example: Value Ownership</a></h4>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Rust");
    // s1 owns the string "Rust"
}</code></pre></pre>
<h4 id="explanation"><a class="header" href="#explanation">Explanation</a></h4>
<ul>
<li>In this example, the variable <code>s1</code> owns the <code>String</code> value <code>"Rust"</code>. The ownership means that <code>s1</code> is responsible for managing the memory that the string occupies.</li>
</ul>
<h3 id="22-rule-2-only-one-owner-at-a-time"><a class="header" href="#22-rule-2-only-one-owner-at-a-time">2.2 Rule 2: Only One Owner at a Time</a></h3>
<p>Ownership in Rust is exclusive. When ownership is transferred from one variable to another, the original owner can no longer access the value.</p>
<h4 id="example-ownership-transfer"><a class="header" href="#example-ownership-transfer">Example: Ownership Transfer</a></h4>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Rust");
    let s2 = s1; // Ownership transferred from s1 to s2
    
    // println!("{}", s1); // Error: s1 no longer owns the value
    println!("{}", s2); // This works, as s2 is the current owner
}</code></pre></pre>
<h4 id="explanation-1"><a class="header" href="#explanation-1">Explanation</a></h4>
<ul>
<li>When <code>s2</code> is assigned the value of <code>s1</code>, ownership is transferred to <code>s2</code>. After the transfer, <code>s1</code> is no longer valid, and any attempt to use <code>s1</code> will result in a compilation error.</li>
</ul>
<h3 id="23-rule-3-value-dropped-when-owner-goes-out-of-scope"><a class="header" href="#23-rule-3-value-dropped-when-owner-goes-out-of-scope">2.3 Rule 3: Value Dropped When Owner Goes Out of Scope</a></h3>
<p>When a variable goes out of scope, Rust automatically drops (deallocates) the value it owns, freeing the associated memory.</p>
<h4 id="example-dropping-values"><a class="header" href="#example-dropping-values">Example: Dropping Values</a></h4>
<pre><pre class="playground"><code class="language-rust">fn main() {
    {
        let s1 = String::from("Rust");
        // s1 is valid within this block
    }
    // s1 is dropped here, and its memory is freed
}</code></pre></pre>
<h4 id="explanation-2"><a class="header" href="#explanation-2">Explanation</a></h4>
<ul>
<li>The variable <code>s1</code> is only valid within its scope (the inner block). Once the block ends, <code>s1</code> goes out of scope, and Rust automatically drops the value, freeing the memory.</li>
</ul>
<h2 id="3-borrowing-and-references"><a class="header" href="#3-borrowing-and-references">3. Borrowing and References</a></h2>
<p>Ownership can be temporarily transferred or shared through <strong>borrowing</strong> and <strong>references</strong>. Borrowing allows a function or another part of the code to temporarily use a value without taking ownership.</p>
<h3 id="31-borrowing-with-references"><a class="header" href="#31-borrowing-with-references">3.1 Borrowing with References</a></h3>
<p>A reference allows you to access a value without taking ownership. This enables multiple parts of your code to read from the same data without violating the ownership rules.</p>
<h4 id="example-borrowing-with-references"><a class="header" href="#example-borrowing-with-references">Example: Borrowing with References</a></h4>
<pre><pre class="playground"><code class="language-rust">fn calculate_length(s: &amp;String) -&gt; usize {
    s.len()
}

fn main() {
    let s1 = String::from("Rust");
    let len = calculate_length(&amp;s1); // Borrowing s1
    
    println!("The length of '{}' is {}.", s1, len);
}</code></pre></pre>
<h4 id="explanation-3"><a class="header" href="#explanation-3">Explanation</a></h4>
<ul>
<li>The function <code>calculate_length</code> borrows the string <code>s1</code> by taking a reference (<code>&amp;String</code>). The ownership of <code>s1</code> remains with <code>main</code>, and <code>calculate_length</code> can read the data without owning it.</li>
<li>The reference (<code>&amp;s1</code>) allows <code>calculate_length</code> to access the string without transferring ownership, ensuring that <code>s1</code> remains valid in <code>main</code> after the function call.</li>
</ul>
<h3 id="32-mutable-references"><a class="header" href="#32-mutable-references">3.2 Mutable References</a></h3>
<p>Rust allows mutable references, enabling you to modify the borrowed value. However, Rust enforces that you can only have one mutable reference to a value at a time, preventing data races.</p>
<h4 id="example-mutable-references"><a class="header" href="#example-mutable-references">Example: Mutable References</a></h4>
<pre><pre class="playground"><code class="language-rust">fn change(s: &amp;mut String) {
    s.push_str(" is great!");
}

fn main() {
    let mut s1 = String::from("Rust");
    change(&amp;mut s1); // Borrowing s1 mutably
    
    println!("{}", s1);
}</code></pre></pre>
<h4 id="explanation-4"><a class="header" href="#explanation-4">Explanation</a></h4>
<ul>
<li>The <code>change</code> function borrows <code>s1</code> as a mutable reference (<code>&amp;mut String</code>), allowing it to modify the original string.</li>
<li>The <code>main</code> function passes a mutable reference to <code>change</code>, which then modifies the string by appending <code>" is great!"</code>.</li>
</ul>
<h2 id="4-summary"><a class="header" href="#4-summary">4. Summary</a></h2>
<p>Rust's ownership model is a powerful system that ensures memory safety without the need for a garbage collector. This lesson covered:</p>
<ul>
<li><strong>The Concept of Ownership</strong>: How Rust manages memory through strict ownership rules.</li>
<li><strong>The Three Rules of Ownership</strong>: Understanding that each value has one owner, there can be only one owner at a time, and values are dropped when their owner goes out of scope.</li>
<li><strong>Borrowing and References</strong>: How Rust allows you to use values temporarily without taking ownership, ensuring safety and preventing common memory errors.</li>
</ul>
<p>Understanding ownership is crucial to writing efficient and safe Rust code. It is the foundation of Rust’s memory safety guarantees and enables you to develop applications that are both fast and free of memory-related bugs. The next lesson will build on these concepts by exploring borrowing and references in greater depth, including mutable references and the rules around their usage.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../03_Functions/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../05_Borrowing_and_References/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../03_Functions/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../05_Borrowing_and_References/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
